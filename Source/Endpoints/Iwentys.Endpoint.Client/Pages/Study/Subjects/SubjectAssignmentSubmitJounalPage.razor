@page "/subject/{SubjectId:int}/assignments/submits"

@using Iwentys.Features.Study.SubjectAssignments.Models
@inherits DependencyInjectionPage

<h3>SubjectAssignmentSubmitJounalPage</h3>

@if (_subjectAssignmentSubmits is not null)
{
    <div>
        @foreach (SubjectAssignmentSubmitDto submit in _subjectAssignmentSubmits)
        {
            <div class="card-list-element">
                <MatCard Class="dark-elevation-01">
                    <MatCardContent>
                        <div class="card-list-element-content">
                            <MatHeadline6>
                                @submit.Student.GetFullName()
                            </MatHeadline6>
                            @if (submit.ApproveTimeUtc is not null)
                            {
                                <MatBody2>
                                    Approved (@submit.ApproveTimeUtc)
                                </MatBody2>
                            }

                            @if (submit.RejectTimeUtc is not null)
                            {
                                <MatBody2>
                                    Rejected (@submit.RejectTimeUtc)
                                </MatBody2>
                            }
                        </div>
                    </MatCardContent>
                    <MatCardActions>
                        @if (submit.ApproveTimeUtc is null)
                        {
                            <MatButton OnClick=@(async () => await Approve(submit))>Approve</MatButton>
                        }

                        @if (submit.RejectTimeUtc is null)
                        {
                            <MatButton OnClick=@(async () => await Reject(submit))>Reject</MatButton>
                        }
                    </MatCardActions>
                </MatCard>
            </div>

        }
    </div>
}

@code {
    [Parameter]
    public int SubjectId { get; set; }
}