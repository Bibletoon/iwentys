@using Iwentys.Features.Guilds.Models.Guilds
@using Iwentys.Features.Students.Models
@using Blazored.LocalStorage

@inject HttpClient Http
@inject ILocalStorageService LocalStorage

@namespace Iwentys.Endpoint.Client.Pages.Guilds

<div class="text-center card">
    <MatHeadline5>Members</MatHeadline5>
    <MatList>
        @if (_leaderBoard is not null)
        {
            @foreach (var member in _leaderBoard.MembersImpact)
            {
                <MatListItem>
                    <p>
                        @member.StudentInfoDto.GithubUsername (@member.StudentInfoDto.GetFullName()) [@member.MemberType]
                    </p>
                    <MatButton OnClick="() => KicMember(member.StudentInfoDto.Id)">
                        Kick
                    </MatButton>
                </MatListItem>
            }
        }

        
    </MatList>
</div>

@code {
    [Parameter]
    public ExtendedGuildProfileWithMemberDataDto GuildProfile { get; set; }

    private async Task KicMember(int memberId)
    {
        await _guildMemberControllerClient.KickGuildMember(GuildProfile.Id, memberId);
    }
}
